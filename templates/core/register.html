{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ficha de inscrição  Clube de Aventureiros Pinhal Junior</title>
    <link rel="stylesheet" href="{% static 'css/register.css' %}" />
    {% include 'core/client_logger_head.html' %}
  </head>
  <body class="registration-page">
    <main class="registration-panel">
      <header class="registration-hero">
        <div>
          <p class="tag">Ficha de inscrição</p>
          <h1>Clube de Aventureiros Pinhal Junior</h1>
          <p class="hero-text">
            Preencha os dados do aventureiro e do responsável para iniciar o cadastro.
            O formulário é dividido em etapas guiadas; esta é a primeira aba.
          </p>
        </div>
        <div class="hero-meta">
          <p class="hero-hint">Primeira aba ativa</p>
          <div class="hero-badge">Cadastro 01/03</div>
        </div>
      </header>

      <nav class="registration-steps" aria-label="Etapas do cadastro">
        <button class="step is-active" type="button" data-step-target="initial">
          01 · Dados iniciais
        </button>
        <button class="step" type="button" disabled>
          02 · Ficha médica
        </button>
        <button class="step" type="button" disabled>
          03 · Termo de imagem
        </button>
      </nav>

      <form
        id="registration-form"
        class="registration-form"
        method="post"
        enctype="multipart/form-data"
        novalidate
      >
        {% csrf_token %}
        <div class="form-feedback-wrapper">
          {% if success_message %}
          <div class="form-feedback form-feedback--success">{{ success_message }}</div>
          {% endif %}
          {% if field_errors.general %}
          <div class="form-feedback form-feedback--error">{{ field_errors.general }}</div>
          {% endif %}
        </div>

        <section class="tab-pane is-active" data-step="initial">
          <div class="panel photo-panel">
            <div>
              <p class="panel-tag">Foto do aventureiro</p>
              <p class="panel-hint">Upload obrigatório (3x4 com fundo branco/transparente).</p>
            </div>
            <div class="photo-preview" data-photo-preview>
              <span>Preview 3x4</span>
            </div>
            <label class="file-field">
              <span class="file-label">Selecionar imagem</span>
              <input type="file" name="aventureiro_foto" accept="image/*" required />
            </label>
          </div>

          <div class="panel-grid">
            <div class="panel">
              <h2>Dados do aventureiro</h2>
              <div class="form-grid">
                <label>
                  Nome completo
                  <input
                    type="text"
                    name="aventureiro_nome"
                    placeholder="Nome"
                    required
                    value="{{ form_values.aventureiro_nome|default:'' }}"
                  />
                </label>
                <label>
                  Sobrenome
                  <input
                    type="text"
                    name="aventureiro_sobrenome"
                    placeholder="Sobrenome"
                    required
                    value="{{ form_values.aventureiro_sobrenome|default:'' }}"
                  />
                </label>
                <label>
                  Sexo
                  <select name="aventureiro_sexo" required>
                    <option value="">Selecione</option>
                    <option value="F" {% if form_values.aventureiro_sexo == 'F' %}selected{% endif %}>
                      Feminino
                    </option>
                    <option value="M" {% if form_values.aventureiro_sexo == 'M' %}selected{% endif %}>
                      Masculino
                    </option>
                  </select>
                </label>
                <div class="date-block">
                  <label>
                    Dia
                    <select name="aventureiro_dia" data-date-field="day" required></select>
                  </label>
                  <label>
                    Mês
                    <select name="aventureiro_mes" data-date-field="month" required></select>
                  </label>
                  <label>
                    Ano
                    <select name="aventureiro_ano" data-date-field="year" required></select>
                  </label>
                </div>
                <label>
                  Colégio
                  <input type="text" name="aventureiro_colegio" placeholder="Colégio frequentado" />
                </label>
                <label>
                  Série / Ano
                  <input type="text" name="aventureiro_serie" placeholder="Ex: 6ª série" />
                </label>
                <label class="field-group">
                  Beneficiário(a) Bolsa Família?
                  <div class="radio-group">
                    <label>
                      <input type="radio" name="aventureiro_bolsa" value="sim" /> Sim
                    </label>
                    <label>
                      <input type="radio" name="aventureiro_bolsa" value="nao" checked /> Não
                    </label>
                  </div>
                </label>
                <div class="field-group">
                  Classe investida
                  <div class="chip-group">
                    {% for classe in 'Abelinhas,Luminárias,Edificadores,Mãos Ajudadoras'.split(',') %}
                    <label class="chip">
                      <input type="checkbox" name="aventureiro_classes" value="{{ classe }}" />
                      {{ classe }}
                    </label>
                    {% endfor %}
                  </div>
                </div>
                <label>
                  Rua
                  <input type="text" name="aventureiro_rua" placeholder="Rua" />
                </label>
                <label>
                  Bairro
                  <input type="text" name="aventureiro_bairro" placeholder="Bairro" />
                </label>
                <label>
                  Cidade
                  <input type="text" name="aventureiro_cidade" placeholder="Cidade" value="São Carlos" />
                </label>
                <label>
                  CEP
                  <input type="text" name="aventureiro_cep" placeholder="00000-000" />
                </label>
                <label>
                  Estado
                  <input type="text" name="aventureiro_estado" placeholder="Estado" value="SP" />
                </label>
                <label>
                  Certidão de nascimento
                  <input type="text" name="aventureiro_certidao" placeholder="Número da certidão" />
                </label>
                <label>
                  Religião
                  <input type="text" name="aventureiro_religiao" placeholder="Religião" />
                </label>
                <label>
                  RG
                  <input type="text" name="aventureiro_rg" placeholder="RG" />
                </label>
                <label>
                  Órgão expedidor
                  <input type="text" name="aventureiro_orgao" placeholder="Órgão expedidor" />
                </label>
                <label>
                  CPF
                  <input type="text" name="aventureiro_cpf" placeholder="CPF" />
                </label>
                <label>
                  WhatsApp do responsável
                  <input type="text" name="responsavel_whatsapp" placeholder="(99) 99999-9999" required value="{{ form_values.responsavel_whatsapp|default:'' }}" />
                </label>
                <label>
                  Tamanho da camiseta
                  <input type="text" name="camiseta_tamanho" placeholder="P / M / G" />
                </label>
              </div>
            </div>

            <div class="panel">
              <h2>Dados do responsável principal</h2>
              <div class="form-grid">
                <label>
                  Nome completo
                  <input
                    type="text"
                    name="responsavel_nome"
                    placeholder="Nome"
                    required
                    value="{{ form_values.responsavel_nome|default:'' }}"
                  />
                </label>
                <label>
                  Sobrenome
                  <input
                    type="text"
                    name="responsavel_sobrenome"
                    placeholder="Sobrenome"
                    required
                    value="{{ form_values.responsavel_sobrenome|default:'' }}"
                  />
                </label>
                <label>
                  Sexo do responsável
                  <select name="responsavel_sexo" required>
                    <option value="">Selecione</option>
                    <option value="F" {% if form_values.responsavel_sexo == 'F' %}selected{% endif %}>Feminino</option>
                    <option value="M" {% if form_values.responsavel_sexo == 'M' %}selected{% endif %}>Masculino</option>
                  </select>
                </label>
                <label>
                  CPF
                  <input type="text" name="responsavel_cpf" placeholder="CPF" required value="{{ form_values.responsavel_cpf|default:'' }}" />
                </label>
                <label>
                  Endereço
                  <input type="text" name="responsavel_endereco" placeholder="Rua, número, complemento" required value="{{ form_values.responsavel_endereco|default:'' }}" />
                </label>
                <label>
                  Nome de usuário
                  <input type="text" name="responsavel_username" placeholder="Login" required value="{{ form_values.responsavel_username|default:'' }}" />
                </label>
                <label>
                  Senha (4 dígitos)
                  <input type="password" name="responsavel_password1" placeholder="Senha" required />
                </label>
                <label>
                  Confirme a senha
                  <input type="password" name="responsavel_password2" placeholder="Confirme" required />
                </label>
                <label>
                  E-mail
                  <input type="email" name="responsavel_email" placeholder="email@example.com" value="{{ form_values.responsavel_email|default:'' }}" />
                </label>
                <label>
                  WhatsApp
                  <input
                    type="text"
                    name="responsavel_whatsapp"
                    placeholder="(99) 99999-9999"
                    required
                    value="{{ form_values.responsavel_whatsapp|default:'' }}"
                  />
                </label>
              </div>

              <div class="family-grid">
                <div>
                  <h3>Pai</h3>
                  <label>
                    Nome
                    <input type="text" name="pai_nome" />
                  </label>
                  <label>
                    E-mail
                    <input type="email" name="pai_email" />
                  </label>
                  <label>
                    CPF
                    <input type="text" name="pai_cpf" />
                  </label>
                  <label>
                    WhatsApp
                    <input type="text" name="pai_whatsapp" />
                  </label>
                </div>
                <div>
                  <h3>Mãe</h3>
                  <label>
                    Nome
                    <input type="text" name="mae_nome" />
                  </label>
                  <label>
                    E-mail
                    <input type="email" name="mae_email" />
                  </label>
                  <label>
                    CPF
                    <input type="text" name="mae_cpf" />
                  </label>
                  <label>
                    WhatsApp
                    <input type="text" name="mae_whatsapp" />
                  </label>
                </div>
                <div>
                  <h3>Responsável legal</h3>
                  <label>
                    Grau de parentesco
                    <input type="text" name="responsavel_legal_parentesco" />
                  </label>
                  <label>
                    Nome
                    <input type="text" name="responsavel_legal_nome" />
                  </label>
                  <label>
                    CPF
                    <input type="text" name="responsavel_legal_cpf" />
                  </label>
                  <label>
                    E-mail
                    <input type="email" name="responsavel_legal_email" />
                  </label>
                  <label>
                    WhatsApp
                    <input type="text" name="responsavel_legal_whatsapp" />
                  </label>
                </div>
              </div>
            </div>
          </div>

          <div class="declaration-panel">
            <div class="declaration-row">
              <label>
                Local
                <input type="text" name="declaracao_local" value="São Carlos" readonly />
              </label>
              <label>
                Data
                <input type="text" name="declaracao_data" data-today-date readonly />
              </label>
            </div>
            <label class="checkbox-field">
              <input type="checkbox" name="confirmacao_verdadeiro" required />
              Declaro que todas as informações prestadas acima são verdadeiras.
            </label>
            <div class="signature-field">
              <div>
                <p>Assinatura digital</p>
                <p class="helper">Use o dedo ou mouse para assinar com fundo transparente.</p>
              </div>
              <canvas id="signature-canvas" width="360" height="180"></canvas>
              <div class="signature-actions">
                <button type="button" data-action="clear-signature">Limpar</button>
                <small>O desenho será salvo automaticamente.</small>
              </div>
              <input type="hidden" name="assinatura_data" />
            </div>
            <button type="submit" class="primary-btn">Enviar cadastro</button>
          </div>
        </section>
      </form>
    </main>
    <script src="{% static 'js/register.js' %}"></script>
  </body>
</html>
