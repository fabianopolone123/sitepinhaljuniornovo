{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ficha de inscri√ß√£o ¬ó Clube de Aventureiros Pinhal Junior</title>
    <link rel="stylesheet" href="{% static 'css/register.css' %}" />
    {% include 'core/client_logger_head.html' %}
  </head>
  <body class="registration-page">
    <main class="registration-panel">
      <header class="registration-hero">
        <div>
          <p class="tag">Ficha de inscri√ß√£o</p>
          <h1>Clube de Aventureiros Pinhal Junior</h1>
          <p class="hero-text">
            Preencha os dados do aventureiro e do respons√°vel para iniciar o cadastro.
            O formul√°rio √© dividido em etapas guiadas; esta √© a primeira aba.
          </p>
        </div>
        <div class="hero-meta">
          <p class="hero-hint">Primeira aba ativa</p>
          <div class="hero-badge">Cadastro 01/03</div>
        </div>
      </header>

      <nav class="registration-steps" aria-label="Etapas do cadastro">
        <button class="step is-active" type="button" data-step-target="initial">
          01 ¬∑ Dados iniciais
        </button>
        <button class="step" type="button" data-step-target="medical">
          02 ¬∑ Ficha m√©dica
        </button>
        <button class="step" type="button" data-step-target="termo">
          03 ¬∑ Termo de imagem
        </button>
      </nav>

      <form
        id="registration-form"
        class="registration-form"
        method="post"
        enctype="multipart/form-data"
        novalidate
        data-active-step="initial"
      >
        {% csrf_token %}
        <div class="form-feedback-wrapper">
          {% if success_message %}
          <div class="form-feedback form-feedback--success">{{ success_message }}</div>
          {% endif %}
          {% if field_errors.general %}
          <div class="form-feedback form-feedback--error">{{ field_errors.general }}</div>
          {% endif %}
          <div
            class="form-feedback form-feedback--error"
            data-error-summary
            role="alert"
            hidden
          >
          </div>
        </div>

        <section class="tab-pane is-active" data-step="initial">
          <div class="step-section step-section--initial" data-step-section="initial">
            <div class="adventurer-manager" data-adventurer-manager>
            <div class="adventurer-tabs" data-adventurer-tabs></div>
            <div class="adventurer-blocks" data-adventurer-blocks>
            {% for adventurer in adventurers_data %}
              {% include 'core/_adventurer_block.html' with block=adventurer index=forloop.counter0 active=forloop.first is_template=False classes=classes %}
            {% endfor %}
            </div>
            <button type="button" class="ghost-btn add-adventurer-btn" data-action="add-adventurer">
              + Adicionar outro aventureiro
            </button>
          </div>
          <template id="adventurer-template">
            {% include 'core/_adventurer_block.html' with block=empty_adventurer index='__INDEX__' active=False is_template=True classes=classes %}
          </template>
        <div class="panel">
          <h2>Dados do respons√°vel principal</h2>
          <div class="form-grid">
            <label>
              Nome completo
              <input
                type="text"
                name="responsavel_nome"
                placeholder="Nome"
                required
                value='{{ form_values.responsavel_nome|default:"" }}'
              />
            </label>
            <label>
              Sobrenome
              <input
                type="text"
                name="responsavel_sobrenome"
                placeholder="Sobrenome"
                required
                value='{{ form_values.responsavel_sobrenome|default:"" }}'
              />
            </label>
            <label>
              Sexo do respons√°vel
              <select name="responsavel_sexo" required>
                <option value="">Selecione</option>
                <option value="F" {% if form_values.responsavel_sexo == 'F' %}selected{% endif %}>Feminino</option>
                <option value="M" {% if form_values.responsavel_sexo == 'M' %}selected{% endif %}>Masculino</option>
              </select>
            </label>
            <label>
              CPF
              <input
                type="text"
                name="responsavel_cpf"
                placeholder="CPF"
                required
                value='{{ form_values.responsavel_cpf|default:"" }}'
              />
            </label>
            <label>
              Endere√ßo
              <input
                type="text"
                name="responsavel_endereco"
                placeholder="Rua, n√∫mero, complemento"
                required
                value='{{ form_values.responsavel_endereco|default:"" }}'
              />
            </label>
            <label>
              Nome de usu√°rio
              <input
                type="text"
                name="responsavel_username"
                placeholder="Login"
                required
                value='{{ form_values.responsavel_username|default:"" }}'
              />
            </label>
            <label>
              Senha (4 d√≠gitos)
              <input type="password" name="responsavel_password1" placeholder="Senha" required />
            </label>
            <label>
              Confirme a senha
              <input type="password" name="responsavel_password2" placeholder="Confirme" required />
            </label>
            <label>
              E-mail
              <input
                type="email"
                name="responsavel_email"
                placeholder="email@example.com"
                required
                value='{{ form_values.responsavel_email|default:"" }}'
              />
            </label>
            <label>
              WhatsApp
              <input
                type="text"
                name="responsavel_whatsapp"
                placeholder="(99) 99999-9999"
                required
                value='{{ form_values.responsavel_whatsapp|default:"" }}'
              />
            </label>
            <label>
              Grau de parentesco com o aventureiro
              <input
                type="text"
                name="responsavel_legal_parentesco"
                placeholder="Ex: Pai, M√£e, Respons√°vel"
                required
                value='{{ form_values.responsavel_legal_parentesco|default:"" }}'
              />
            </label>
          </div>

            <div class="family-grid">
              <div>
                <h3>Pai</h3>
                <label>
                  Nome
                  <input
                    type="text"
                    name="pai_nome"
                    required
                    value='{{ form_values.pai_nome|default:"" }}'
                  />
                </label>
                <label>
                  E-mail
                  <input
                    type="email"
                    name="pai_email"
                    required
                    value='{{ form_values.pai_email|default:"" }}'
                  />
                </label>
                <label>
                  CPF
                  <input
                    type="text"
                    name="pai_cpf"
                    required
                    value='{{ form_values.pai_cpf|default:"" }}'
                  />
                </label>
                <label>
                  WhatsApp
                  <input
                    type="text"
                    name="pai_whatsapp"
                    required
                    value='{{ form_values.pai_whatsapp|default:"" }}'
                  />
                </label>
              </div>
              <div>
                <h3>M√£e</h3>
                <label>
                  Nome
                  <input
                    type="text"
                    name="mae_nome"
                    required
                    value='{{ form_values.mae_nome|default:"" }}'
                  />
                </label>
                <label>
                  E-mail
                  <input
                    type="email"
                    name="mae_email"
                    required
                    value='{{ form_values.mae_email|default:"" }}'
                  />
                </label>
                <label>
                  CPF
                  <input
                    type="text"
                    name="mae_cpf"
                    required
                    value='{{ form_values.mae_cpf|default:"" }}'
                  />
                </label>
                <label>
                  WhatsApp
                  <input
                    type="text"
                    name="mae_whatsapp"
                    required
                    value='{{ form_values.mae_whatsapp|default:"" }}'
                  />
                </label>
              </div>
            </div>
        </div>
          <div class="declaration-panel">
            <div class="declaration-row">
              <label>
                Local
                <input type="text" name="declaracao_local" value="S√£o Carlos" readonly />
              </label>
              <label>
                Data
                <input type="text" name="declaracao_data" data-today-date readonly />
              </label>
            </div>
            <label class="checkbox-field">
              <input type="checkbox" name="confirmacao_verdadeiro" required />
              Declaro que todas as informa√ß√µes prestadas acima s√£o verdadeiras.
            </label>
            <div class="signature-field signature-field--responsible">
              <div>
                <p>Assinatura digital</p>
                <p class="helper">Clique em ‚ÄúAssinar‚Äù para abrir a janela flutuante.</p>
              </div>
              <button
                type="button"
                class="primary-btn signature-btn"
                data-action="open-signature"
                data-signature-target="responsible-signature"
              >
                Assinar agora
              </button>
              <div
                class="helper signature-preview"
                data-signature-preview
                data-signature-for="responsible-signature"
              >
                <span data-signature-preview-text>Sem assinatura ainda.</span>
                <img
                  class="signature-preview-img"
                  data-signature-preview-img
                  src=""
                  alt="Pr√©via da assinatura"
                  hidden
                />
              </div>
              <input
                type="hidden"
                id="responsible-signature"
                name="assinatura_data"
                data-signature-field
                required
                value='{{ form_values.assinatura_data|default:"" }}'
              />
            </div>
              <button type="submit" class="primary-btn">Enviar cadastro</button>
            </div>
          </div>
          <div class="step-section step-section--termo" data-step-section="termo">
            <div class="panel term-panel">
              <h2>üì∏ Termo de autoriza√ß√£o de uso de imagem</h2>
              <p class="term-lead">
                Eu, respons√°vel legal pelo menor acima identificado, autorizo o uso gratuito de imagem
                em fotos, v√≠deos e documentos para fins institucionais, promocionais e de divulga√ß√£o em
                todo territ√≥rio nacional.
              </p>
              <div class="form-grid term-grid">
                <label>
                  Nome da Crian√ßa
                  <input
                    type="text"
                    name="termo_nome_crianca"
                    placeholder="Nome completo"
                    required
                    value='{{ form_values.termo_nome_crianca|default:"" }}'
                  />
                </label>
                <label>
                  Nome do Respons√°vel Legal
                  <input
                    type="text"
                    name="termo_responsavel"
                    placeholder="Nome completo"
                    required
                    value='{{ form_values.termo_responsavel|default:"" }}'
                  />
                </label>
                <label>
                  Nacionalidade
                  <input
                    type="text"
                    name="termo_nacionalidade"
                    placeholder="Ex: Brasileira"
                    required
                    value='{{ form_values.termo_nacionalidade|default:"" }}'
                  />
                </label>
                <label>
                  Estado civil
                  <input
                    type="text"
                    name="termo_estado_civil"
                    placeholder="Ex: Casado(a)"
                    required
                    value='{{ form_values.termo_estado_civil|default:"" }}'
                  />
                </label>
                <label>
                  RG
                  <input
                    type="text"
                    name="termo_rg"
                    placeholder="N√∫mero do RG"
                    required
                    value='{{ form_values.termo_rg|default:"" }}'
                  />
                </label>
                <label>
                  CPF
                  <input
                    type="text"
                    name="termo_cpf"
                    placeholder="N√∫mero do CPF"
                    required
                    value='{{ form_values.termo_cpf|default:"" }}'
                  />
                </label>
                <label>
                  Resid√™ncia
                  <input
                    type="text"
                    name="termo_endereco"
                    placeholder="Logradouro, n√∫mero, complemento"
                    required
                    value='{{ form_values.termo_endereco|default:"" }}'
                  />
                </label>
                <label>
                  Munic√≠pio
                  <input
                    type="text"
                    name="termo_municipio"
                    placeholder="Cidade"
                    required
                    value='{{ form_values.termo_municipio|default:"" }}'
                  />
                </label>
                <label>
                  Telefone para contato
                  <input
                    type="text"
                    name="termo_telefone"
                    placeholder="(99) 99999-9999"
                    required
                    value='{{ form_values.termo_telefone|default:"" }}'
                  />
                </label>
                <label>
                  Data
                  <input
                    type="text"
                    name="termo_data"
                    data-today-date
                    required
                    readonly
                    value='{{ form_values.termo_data|default:"" }}'
                  />
                </label>
              </div>
              <div class="signature-field signature-field--termo">
                <div>
                  <p>Assinatura do Respons√°vel Legal</p>
                  <p class="helper">Assine aqui para validar o termo.</p>
                </div>
                <button
                  type="button"
                  class="primary-btn signature-btn"
                  data-action="open-signature"
                  data-signature-target="termo-signature"
                >
                  Assinar termo de imagem
                </button>
                <div
                  class="helper signature-preview"
                  data-signature-preview
                  data-signature-for="termo-signature"
                >
                  <span data-signature-preview-text>Sem assinatura ainda.</span>
                  <img
                    class="signature-preview-img"
                    data-signature-preview-img
                    src=""
                    alt="Pr√©via da assinatura do termo"
                    hidden
                  />
                </div>
                <input
                  type="hidden"
                  id="termo-signature"
                  name="termo_assinatura"
                  data-signature-field
                  required
                  value='{{ form_values.termo_assinatura|default:"" }}'
                />
              </div>
            </div>
          </div>
        </section>
      </form>
  </main>
  <div class="signature-modal" id="signature-modal" aria-hidden="true">
    <div class="signature-backdrop" data-action="close-signature"></div>
    <div class="signature-modal__card">
      <div class="signature-modal__header">
        <h3>Assine com o dedo ou mouse</h3>
        <button class="ghost-btn" type="button" data-action="close-signature">Fechar</button>
      </div>
      <canvas id="signature-canvas" width="600" height="240"></canvas>
      <div class="signature-modal__actions">
        <button type="button" class="ghost-btn" data-action="clear-signature">Limpar</button>
        <button type="button" class="primary-btn" data-action="save-signature">Salvar assinatura</button>
      </div>
    </div>
  </div>
  <script src="{% static 'js/register.js' %}"></script>
</body>
</html>
